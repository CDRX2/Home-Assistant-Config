view_layout:
  grid-area: main

elements:

    ##########################################################################################
    #                                                                                        #
    #          IF NO MEDIA PLAYING, SHOW RECENT AND UPCOMING TV & MOVIES                     #
    #                                                                                        #
    ##########################################################################################


  - type: conditional
    conditions:
      - entity: media_player.living_room_tv
        state: 'off'
      - entity: media_player.pioneer_avr
        state: 'off'
    elements:
      - type: 'custom:mod-card'
        card:
          type: 'custom:layout-card'
          layout_type: custom:grid-layout
          layout:
            height: 100%
            grid-template-columns: 30% 70%
            grid-template-rows: 25% 25% 25% 25%
            grid-template-areas: |
              "remote anticipatedseries"
              "remote anticipatedmovies"
              "remote upcomingseries"
              "remote upcomingfilms"
          cards:
            - !include remote.yaml

        # Upcoming Media Card:
        # https://github.com/custom-cards/upcoming-media-card

        # Enabled by Sonarr upcoming media:
        # https://github.com/NemesisRE/sensor.plex_recently_added

            - type: 'custom:upcoming-media-card'
              entity: sensor.trakt_anticipated_shows
              max: 7
              flag: false
              date: ddmm
              enable_tooltips: true
              enable_trailers: true
              clock: 24
              title_text: $empty
              line1_text: $empty
              line2_text: $empty
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              line2_size: medium
              card_mod:
                style: |
                  ha-card.type-custom-upcoming-media-card {
                    background: none;
                    box-shadow: none !important;
                    padding: 0px !important;
                    overflox: visible !important;
                  }
                  .card-header {
                    font-size: 1.5vw;
                    padding: 0px;
                    line-height: 2.5vw;
                  }
                  ha-card > div {
                    padding: 0px !important;
                  }
                  .trak_poster {
                    width: 6vw !important;
                    margin-right: 1vw !important;
                    margin-left: 0vw !important;
                    position: absolute !important;
                    margin-top: 0.7vw !important;
                  }
                  .trak_poster:nth-child(1) {
                    left: 0vw;
                  }
                  .trak_poster:nth-child(2) {
                    left: 7vw;
                  }
                  .trak_poster:nth-child(3) {
                    left: 14vw;
                  }
                  .trak_poster:nth-child(4) {
                    left: 21vw;
                  }
                  .trak_poster:nth-child(5) {
                    left: 28vw;
                  }
                  .trak_poster:nth-child(6) {
                    left: 35vw;
                  }
                  .trak_poster:nth-child(7) {
                    left: 42vw;
                  }
                  .trak_poster .trak_svg_poster {
                    display: none;
                  }
                  .trak_container_poster{
                    width: 100% !important;
                    outline: none !important;
                    margin: 0px !important;
                  }
                  .trak_svg_poster > rect {
                   fill: none !important;
                  }
                  .trak_poster .trak_svg_poster:hover {
                    opacity: 0%;
                    transition-duration: 200ms;
                  }
                  .trak_line0_poster {
                    font-size: 0.4vw !important;
                  }
                  .trak_line1_poster {
                    font-size: 1.6vw !important;
                  }
                  .trak_line2_poster {
                    font-size: 1.5vw !important;
                  }
              view_layout:
                grid-area: anticipatedseries
              title: Découverte séries

            - type: 'custom:upcoming-media-card'
              entity: sensor.trakt_anticipated_movies
              max: 7
              flag: false
              date: ddmm
              enable_tooltips: true
              enable_trailers: true
              clock: 24
              title_text: $empty
              line1_text: $day, $date
              line2_text: $number - $runtime
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              line2_size: medium
              card_mod:
                style: |
                  ha-card.type-custom-upcoming-media-card {
                    background: none;
                    box-shadow: none !important;
                    padding: 0px !important;
                    overflox: visible !important;
                  }
                  .card-header {
                    font-size: 1.5vw;
                    padding: 0px;
                    line-height: 2.5vw;
                  }
                  ha-card > div {
                    padding: 0px !important;
                  }
              view_layout:
                grid-area: anticipatedmovies
              title: Découverte films

        # Enabled by Sonarr upcoming media:
        # https://github.com/custom-components/sensor.sonarr_upcoming_media

            - type: 'custom:upcoming-media-card'
              entity: sensor.sonarr_upcoming_media
              max: 7
              flag: false
              date: ddmm
              clock: 24
              title_text: $empty
              line1_text: $day, $date
              line2_text: $number - $runtime
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              line2_size: medium
              card_mod:
                style: |
                  ha-card.type-custom-upcoming-media-card {
                    background: none;
                    box-shadow: none !important;
                    padding: 0px !important;
                    overflox: visible !important;
                  }
                  .card-header {
                    font-size: 1.5vw;
                    padding: 0px;
                    line-height: 2.5vw;
                  }
                  ha-card > div {
                    padding: 0px !important;
                  }
                  .sona_poster {
                    width: 6vw !important;
                    margin-right: 1vw !important;
                    margin-left: 0vw !important;
                    position: absolute !important;
                    margin-top: 0.7vw !important;
                  }
                  .sona_poster:nth-child(1) {
                    left: 0vw;
                  }
                  .sona_poster:nth-child(2) {
                    left: 7vw;
                  }
                  .sona_poster:nth-child(3) {
                    left: 14vw;
                  }
                  .sona_poster:nth-child(4) {
                    left: 21vw;
                  }
                  .sona_poster:nth-child(5) {
                    left: 28vw;
                  }
                  .sona_poster:nth-child(6) {
                    left: 35vw;
                  }
                  .sona_poster:nth-child(7) {
                    left: 42vw;
                  }
                  .sona_poster .sona_svg_poster {
                    position: absolute !important;
                    bottom: 5%;
                    left: 0;
                    width: 100% !important;
                    backdrop-filter: blur(10px);
                    -webkit-backdrop-filter: blur(10px);
                    background-color: rgba(44, 45, 67, 0.3);
                    border-radius: 0% 1% 1% 0%;
                    margin: 0px !important;
                    transition-duration: 150ms;
                    overflow: hidden !important;
                  }
                  .sona_container_poster{
                    width: 100% !important;
                    outline: none !important;
                    margin: 0px !important;
                  }
                  .sona_svg_poster > rect {
                   fill: none !important;
                  }
                  .sona_poster .sona_svg_poster:hover {
                    opacity: 0%;
                    transition-duration: 200ms;
                  }
                  .sona_line0_poster {
                    font-size: 0.4vw !important;
                  }
                  .sona_line1_poster {
                    font-size: 1.6vw !important;
                  }
                  .sona_line2_poster {
                    font-size: 1.5vw !important;
                  }
              view_layout:
                grid-area: upcomingseries
              title: Prochaines séries

        # Enabled by Radarr upcoming media:
        # https://github.com/custom-components/sensor.radarr_upcoming_media

            - type: 'custom:upcoming-media-card'
              entity: sensor.radarr_upcoming_media
              max: 7
              date: ddmm
              flag: false
              clock: 24
              title_text: $empty
              line1_text: $date
              line2_text: $empty
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              card_mod:
                style: |
                  .rada_poster {
                    width: 6vw !important;
                    margin-right: 1vw !important;
                    margin-left: 0vw !important;
                    position: absolute !important;
                    margin-top: 0.7vw !important;
                  }
                  .rada_poster:nth-child(1) {
                    left: 0vw;
                  }
                  .rada_poster:nth-child(2) {
                    left: 7vw;
                  }
                  .rada_poster:nth-child(3) {
                    left: 14vw;
                  }
                  .rada_poster:nth-child(4) {
                    left: 21vw;
                  }
                  .rada_poster:nth-child(5) {
                    left: 28vw;
                  }
                  .rada_poster:nth-child(6) {
                    left: 35vw;
                  }
                  .rada_poster:nth-child(7) {
                    left: 42vw;
                  }
                  .rada_poster .rada_svg_poster {
                    position: absolute !important;
                    top: 5%;
                    left: 0;
                    width: 40% !important;
                    backdrop-filter: blur(5px);
                    -webkit-backdrop-filter: blur(5px);
                    background-color: rgba(44, 45, 67, 0.3);
                    border-radius: 0% 1% 1% 0%;
                    margin: 0px !important;
                    transition-duration: 150ms;
                    overflow: hidden !important;
                  }
                  .rada_container_poster{
                    width: 100% !important;
                    outline: none !important;
                    margin: 0px !important;
                  }
                  .rada_svg_poster > rect {
                   fill: none !important;
                  }
                  .rada_poster .rada_svg_poster:hover {
                    opacity: 0%;
                    transition-duration: 200ms;
                  }
                  .rada_line0_poster {
                    font-size: 0px !important;
                  }
                  .rada_line1_poster {
                    font-size: 3vw !important;
                  }
              view_layout:
                grid-area: upcomingfilms
              title: Prochains films
        card_mod:
          style:
            layout-card$:
              grid-layout$: |
                #root {
                  height: 100%;
                }
            .: |
              ha-card {
                height: 100%;
                width: 100%;
              }

    ###########################################################################
    #                                                                         #
    #          IF JELLYFIN IS ON, SHOW POSTER, RECENTLY ADDED & REMOTE        #
    #                                                                         #
    ###########################################################################

    # Mini Media Player Card:
    # https://github.com/kalkih/mini-media-player

  - type: conditional
    conditions:
      - entity: sensor.living_room_tv_source
        state: 'Jellyfin'
    elements:
      - type: 'custom:mod-card'
        card:
          type: 'custom:layout-card'
          layout_type: custom:grid-layout
          layout:
            height: 100%
            grid-template-columns: 30% 70%
            grid-template-rows: 25% 25% 25% 25%
            grid-template-areas: |
              "remote recentseries"
              "remote recentfilms"
              "remote upcomingseries"
              "remote upcomingfilms"
          cards:
            - !include remote.yaml

        # Upcoming Media Card:
        # https://github.com/custom-cards/upcoming-media-card

        # Enabled by Sonarr upcoming media:
        # https://github.com/NemesisRE/sensor.plex_recently_added

            - type: 'custom:upcoming-media-card'
              entity: sensor.plex_recently_added_show
              max: 7
              flag: false
              date: ddmm
              clock: 24
              title_text: $empty
              line1_text: $day
              line2_text: $date, $runtime
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              line2_size: medium
              card_mod:
                style: |
                  ha-card.type-custom-upcoming-media-card {
                    background: none;
                    box-shadow: none !important;
                    padding: 0px !important;
                    overflox: visible !important;
                  }
                  .card-header {
                    font-size: 1.5vw;
                    padding: 0px;
                    line-height: 2.5vw;
                  }
                  ha-card > div {
                    padding: 0px !important;
                  }
                  .plex_poster {
                    width: 6vw !important;
                    margin-right: 1vw !important;
                    margin-left: 0vw !important;
                    position: absolute !important;
                    margin-top: 0.7vw !important;
                  }
                  .plex_poster:nth-child(1) {
                    left: 0vw;
                  }
                  .plex_poster:nth-child(2) {
                    left: 7vw;
                  }
                  .plex_poster:nth-child(3) {
                    left: 14vw;
                  }
                  .plex_poster:nth-child(4) {
                    left: 21vw;
                  }
                  .plex_poster:nth-child(5) {
                    left: 28vw;
                  }
                  .plex_poster:nth-child(6) {
                    left: 35vw;
                  }
                  .plex_poster:nth-child(7) {
                    left: 42vw;
                  }
                  .plex_poster .plex_svg_poster {
                    position: absolute !important;
                    bottom: 5%;
                    left: 0;
                    width: 100% !important;
                    backdrop-filter: blur(10px);
                    -webkit-backdrop-filter: blur(10px);
                    background-color: rgba(44, 45, 67, 0.3);
                    border-radius: 0% 1% 1% 0%;
                    margin: 0px !important;
                    transition-duration: 150ms;
                    overflow: hidden !important;
                  }
                  .plex_container_poster{
                    width: 100% !important;
                    outline: none !important;
                    margin: 0px !important;
                  }
                  .plex_svg_poster > rect {
                   fill: none !important;
                  }
                  .plex_poster .plex_svg_poster:hover {
                    opacity: 0%;
                    transition-duration: 200ms;
                  }
                  .plex_line0_poster {
                    font-size: 0.4vw !important;
                  }
                  .plex_line1_poster {
                    font-size: 1.6vw !important;
                  }
                  .plex_line2_poster {
                    font-size: 1.5vw !important;
                  }
              view_layout:
                grid-area: recentseries
              title: Séries récentes

            - type: 'custom:upcoming-media-card'
              entity: sensor.plex_recently_added_movie
              max: 7
              flag: false
              date: ddmm
              clock: 24
              title_text: $empty
              line1_text: $day, $date
              line2_text: $number - $runtime
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              line2_size: medium
              card_mod:
                style: |
                  ha-card.type-custom-upcoming-media-card {
                    background: none;
                    box-shadow: none !important;
                    padding: 0px !important;
                    overflox: visible !important;
                  }
                  .card-header {
                    font-size: 1.5vw;
                    padding: 0px;
                    line-height: 2.5vw;
                  }
                  ha-card > div {
                    padding: 0px !important;
                  }
              view_layout:
                grid-area: recentfilms
              title: Films récents

        # Enabled by Sonarr upcoming media:
        # https://github.com/custom-components/sensor.sonarr_upcoming_media

            - type: 'custom:upcoming-media-card'
              entity: sensor.sonarr_upcoming_media
              max: 7
              flag: false
              date: ddmm
              clock: 24
              title_text: $empty
              line1_text: $day, $date
              line2_text: $number - $runtime
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              line2_size: medium
              card_mod:
                style: |
                  ha-card.type-custom-upcoming-media-card {
                    background: none;
                    box-shadow: none !important;
                    padding: 0px !important;
                    overflox: visible !important;
                  }
                  .card-header {
                    font-size: 1.5vw;
                    padding: 0px;
                    line-height: 2.5vw;
                  }
                  ha-card > div {
                    padding: 0px !important;
                  }
                  .sona_poster {
                    width: 6vw !important;
                    margin-right: 1vw !important;
                    margin-left: 0vw !important;
                    position: absolute !important;
                    margin-top: 0.7vw !important;
                  }
                  .sona_poster:nth-child(1) {
                    left: 0vw;
                  }
                  .sona_poster:nth-child(2) {
                    left: 7vw;
                  }
                  .sona_poster:nth-child(3) {
                    left: 14vw;
                  }
                  .sona_poster:nth-child(4) {
                    left: 21vw;
                  }
                  .sona_poster:nth-child(5) {
                    left: 28vw;
                  }
                  .sona_poster:nth-child(6) {
                    left: 35vw;
                  }
                  .sona_poster:nth-child(7) {
                    left: 42vw;
                  }
                  .sona_poster .sona_svg_poster {
                    position: absolute !important;
                    bottom: 5%;
                    left: 0;
                    width: 100% !important;
                    backdrop-filter: blur(10px);
                    -webkit-backdrop-filter: blur(10px);
                    background-color: rgba(44, 45, 67, 0.3);
                    border-radius: 0% 1% 1% 0%;
                    margin: 0px !important;
                    transition-duration: 150ms;
                    overflow: hidden !important;
                  }
                  .sona_container_poster{
                    width: 100% !important;
                    outline: none !important;
                    margin: 0px !important;
                  }
                  .sona_svg_poster > rect {
                   fill: none !important;
                  }
                  .sona_poster .sona_svg_poster:hover {
                    opacity: 0%;
                    transition-duration: 200ms;
                  }
                  .sona_line0_poster {
                    font-size: 0.4vw !important;
                  }
                  .sona_line1_poster {
                    font-size: 1.6vw !important;
                  }
                  .sona_line2_poster {
                    font-size: 1.5vw !important;
                  }
              view_layout:
                grid-area: upcomingseries
              title: Prochaines séries

        # Enabled by Radarr upcoming media:
        # https://github.com/custom-components/sensor.radarr_upcoming_media

            - type: 'custom:upcoming-media-card'
              entity: sensor.radarr_upcoming_media
              max: 7
              date: ddmm
              flag: false
              clock: 24
              title_text: $empty
              line1_text: $date
              line2_text: $empty
              line3_text: $empty
              line4_text: $empty
              line1_size: large
              card_mod:
                style: |
                  .rada_poster {
                    width: 6vw !important;
                    margin-right: 1vw !important;
                    margin-left: 0vw !important;
                    position: absolute !important;
                    margin-top: 0.7vw !important;
                  }
                  .rada_poster:nth-child(1) {
                    left: 0vw;
                  }
                  .rada_poster:nth-child(2) {
                    left: 7vw;
                  }
                  .rada_poster:nth-child(3) {
                    left: 14vw;
                  }
                  .rada_poster:nth-child(4) {
                    left: 21vw;
                  }
                  .rada_poster:nth-child(5) {
                    left: 28vw;
                  }
                  .rada_poster:nth-child(6) {
                    left: 35vw;
                  }
                  .rada_poster:nth-child(7) {
                    left: 42vw;
                  }
                  .rada_poster .rada_svg_poster {
                    position: absolute !important;
                    top: 5%;
                    left: 0;
                    width: 40% !important;
                    backdrop-filter: blur(5px);
                    -webkit-backdrop-filter: blur(5px);
                    background-color: rgba(44, 45, 67, 0.3);
                    border-radius: 0% 1% 1% 0%;
                    margin: 0px !important;
                    transition-duration: 150ms;
                    overflow: hidden !important;
                  }
                  .rada_container_poster{
                    width: 100% !important;
                    outline: none !important;
                    margin: 0px !important;
                  }
                  .rada_svg_poster > rect {
                   fill: none !important;
                  }
                  .rada_poster .rada_svg_poster:hover {
                    opacity: 0%;
                    transition-duration: 200ms;
                  }
                  .rada_line0_poster {
                    font-size: 0px !important;
                  }
                  .rada_line1_poster {
                    font-size: 3vw !important;
                  }
              view_layout:
                grid-area: upcomingfilms
              title: Prochains films
        card_mod:
          style:
            layout-card$:
              grid-layout$: |
                #root {
                  height: 100%;
                }
            .: |
              ha-card {
                height: 100%;
                width: 100%;
              }

    ###########################################################################
    #                                                                         #
    #                   IF YOUTUBE IS ON, SHOW LOGO & REMOTE                  #
    #                                                                         #
    ###########################################################################

  - type: conditional
    conditions:
      - entity: sensor.living_room_tv_source
        state: 'YouTube'
    elements:
      - type: 'custom:mod-card'
        card:
          type: 'custom:layout-card'
          layout_type: custom:grid-layout
          layout:
            height: 100%
            grid-template-columns: 10% 30% 10% 40% 10%
            grid-template-rows: auto
            grid-template-areas: |
              ". remote . image ."
          cards:
            - !include remote.yaml
            - type: picture
              image: /local/ui/media/youtube.png
              tap_action:
                action: none
              card_mod:
                style: |
                  :host {
                    align-self: center;
                  }
                  ha-card {
                    background: none;
                  }
              view_layout:
                grid-area: image
        card_mod:
          style:
            layout-card$:
              grid-layout$: |
                #root {
                  height: 100%;
                }
            .: |
              ha-card {
                height: 100%;
                width: 100%;
              }

    ###########################################################################
    #                                                                         #
    #                   IF YOUTUBE KIDS IS ON, SHOW LOGO & REMOTE             #
    #                                                                         #
    ###########################################################################

  - type: conditional
    conditions:
      - entity: sensor.living_room_tv_source
        state: 'YouTube Kids'
    elements:
      - type: 'custom:mod-card'
        card:
          type: 'custom:layout-card'
          layout_type: custom:grid-layout
          layout:
            height: 100%
            grid-template-columns: 10% 30% 10% 40% 10%
            grid-template-rows: auto
            grid-template-areas: |
              ". remote . image ."
          cards:
            - !include remote.yaml
            - type: picture
              image: /local/ui/media/youtube-kids.png
              tap_action:
                action: none
              card_mod:
                style: |
                  :host {
                    align-self: center;
                  }
                  ha-card {
                    background: none;
                  }
              view_layout:
                grid-area: image
        card_mod:
          style:
            layout-card$:
              grid-layout$: |
                #root {
                  height: 100%;
                }
            .: |
              ha-card {
                height: 100%;
                width: 100%;
              }

    ########################################################################
    #                                                                      #
    #          IF PLAYING MUSIC ASSISTANT, SHOW MUSIC ASSISTANT            #
    #                                                                      #
    ########################################################################

  - type: conditional
    conditions:
      - entity: media_player.pioneer_avr
        state: "on"
      - entity: media_player.sc_lx78
        state_not: "off"
      - entity: media_player.living_room_tv
        state: "off"
    elements:
    - type: 'custom:hui-element'
      card_type: iframe
      url: http://10.81.19.31:8095
      aspect_ratio: 50%
      style:
        left: 50%
        top: 50%
        width: 100%
        height: 100%

image: /local/ui/floorplan/blurredFloorplanRez.png
card_mod:
  style: |
    ha-card {
      background: rgba(42, 46, 48, 1);
    }
    mod-card.element {
      top: 50%;
      left: 50%;
      height: 100%;
      width: 100%;
    }
type: picture-elements
