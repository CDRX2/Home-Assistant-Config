- sensor:
  - default_entity_id: sensor.living_room_tv_now_playing
    state: "{% if is_state('media_player.living_room_TV', 'off') %}
              {{ states('media_player.living_room_TV') }}
            {% elif is_state('media_player.jellyfin_lg_smart_tv', 'playing') or is_state('media_player.jellyfin_lg_smart_tv', 'paused') %}
              Jellyfin
            {% else %}
              Other
            {% endif %}"
    name: living_room_tv_now_playing


- sensor:
  - default_entity_id: sensor.living_room_tv_source
    name: Living Room TV Source
    state: '{{ state_attr(''media_player.living_room_tv'', ''source'') }}'

- sensor:
  - default_entity_id: sensor.pioneer_sound_mode
    name: Mode audio actuel
    state: '{{ state_attr(''media_player.pioneer_avr'', ''current_sound_mode'')|title }}'

- sensor:
  - default_entity_id: sensor.pioneer_volume
    state: "{% if is_state_attr('media_player.pioneer_avr', 'is_volume_muted', true) %}
              MUTE
            {% else %}
              {{ states('sensor.pioneer_avr_volume')}}
            {% endif %}"
    name: pioneer_volume

- sensor:
  - default_entity_id: sensor.remote_select
    state: "{% if is_state('media_player.pioneer_avr', 'off') and is_state('media_player.living_room_tv', 'off') %}
              off
            {% elif is_state_attr('media_player.pioneer_avr', 'source', 'MEDIA SERVER') and (states('media_player.sc_lx78') != 'off' or states('media_player.sc_lx78') != 'unavailable') %}
              music
            {% else %}
              other
            {% endif %}"
    name: remote_select

- sensor:
  - unit_of_measurement: dB
    default_entity_id: sensor.pioneer_avr_volume
    state: "{% set volume = state_attr('media_player.pioneer_avr', 'volume_level') | float(0) %}
            {% if volume > 0 %}
              {{ ((volume * 92.5) - 80.5) | round(1) }}
            {% else %}
              -âˆž
            {% endif %}"
    name: pioneer_avr_volume
