- sensor:
  - default_entity_id: sensor.cat_flap_status
    icon: "{% if is_state('lock.entree_locked_all', 'locked') %}
            mdi:lock
          {% elif is_state('lock.entree_locked_in', 'locked') %}
            mdi:location-enter
          {% elif is_state('lock.entree_locked_out', 'locked' ) %}
            mdi:location-exit
          {% elif is_state('lock.entree_locked_all', 'unlocked') and is_state('lock.entree_locked_in', 'unlocked') and is_state('lock.entree_locked_out', 'unlocked') %}
            mdi:lock-open
          {% endif %}"
    name: Chati√®re
    state: "{{ iif (is_state('lock.entree_locked_all', 'locked') or is_state('lock.entree_locked_in', 'locked') or is_state('lock.entree_locked_out', 'locked'), 'locked', 'unlocked') }}"

- sensor:
  - default_entity_id: sensor.trash
    state: "{%if (state_attr('calendar.garbage','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 ==1 and (state_attr('calendar.glass','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 !=1 %}
              tomorrow
            {%elif (state_attr('calendar.garbage','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 ==0 and (state_attr('calendar.glass','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 !=0 %}
              today
            {%elif (state_attr('calendar.garbage','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 ==1 and (state_attr('calendar.glass','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 ==1 %}
              verre tomorrow
            {%elif (state_attr('calendar.garbage','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 ==0 and (state_attr('calendar.glass','start_time')|as_timestamp - today_at('00:00')|as_timestamp)/86400 ==0 %}
              verre today
            {% else %}
              normal
            {% endif %}"
    name: trash

- cover:
  - open_cover:
    - target:
        entity_id:
        - cover.store_terrasse
      action: cover.close_cover
    close_cover:
    - target:
        entity_id:
        - cover.store_terrasse
      action: cover.open_cover
    set_cover_position:
    - data:
        position: '{{100-position}}'
        entity_id: cover.store_terrasse
      action: cover.set_cover_position
    default_entity_id: cover.store_terrasse_reversed
    icon: "{% if is_state('cover.store_terrasse', 'closed') %}
            mdi:awning
          {% else %}
            mdi:awning-outline
          {% endif %}"
    name: Store terrasse reversed
    position: '{{ 100 - state_attr(''cover.store_terrasse'', ''current_position'') | int(100) }}'
